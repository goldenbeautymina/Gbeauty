<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>提交完成｜GBeauty</title>
  <style>
    :root{
      --bg:#faf7f2; --card:#fff; --text:#1f2937; --muted:#6b7280;
      --line:#e5e7eb; --btn:#111827; --btnText:#fff; --gold:#b45309;
      --shadow:0 14px 35px rgba(0,0,0,.08); --r:18px; --max:760px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Noto Sans TC","Microsoft JhengHei",sans-serif;background:var(--bg);color:var(--text);line-height:1.7}
    .wrap{max-width:var(--max);margin:0 auto;padding:56px 16px 80px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow);padding:26px}
    h1{margin:0 0 8px;font-size:24px;letter-spacing:.3px;text-align:center}
    .sub{margin:0 0 18px;color:var(--muted);font-size:14px;text-align:center}
    .note{margin:16px 0 0;background:#fff7ed;border-left:4px solid var(--gold);padding:10px 12px;border-radius:12px;color:#4b5563;font-size:14px}
    .btnRow{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:18px}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:999px;border:1px solid var(--line);background:#fff;color:var(--text);text-decoration:none;font-weight:900;cursor:pointer}
    .btn.primary{background:var(--btn);color:var(--btnText);border-color:var(--btn)}
    .btn:hover{filter:brightness(1.03)}
    .tiny{margin-top:10px;text-align:center;font-size:12px;color:#9ca3af}
    .check{
      width:62px;height:62px;border-radius:50%;
      margin:6px auto 14px;
      display:flex;align-items:center;justify-content:center;
      background:#111827;color:#fff;font-size:28px;font-weight:900;
      box-shadow:0 12px 30px rgba(0,0,0,.12);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="check">✓</div>
      <h1>提交完成</h1>
      <p class="sub">我已收到你的提交。現在回到測驗頁，就可以直接揭曉結果。</p>

      <div class="btnRow">
        <button class="btn primary" id="goBackBtn" type="button">
          回測驗頁｜揭曉結果
        </button>
        <a class="btn" href="./">回首頁</a>
      </div>

      <div class="note">
        小提醒：如果你剛剛是用新分頁提交表單，請回到原本的測驗分頁即可；<br>
        若你已關掉分頁，按上方按鈕會帶你回測驗頁並開啟結果鍵。
      </div>

      <div class="tiny" id="autoText"></div>
    </div>
  </div>

  <script>
    /**
     * ✅ 你要回去的測驗頁檔名
     * 若你的測驗頁叫 emperor-poem-test.html 就保持不變
     * 如果你叫別的檔名，改這行即可
     */
    const TEST_PAGE = "emperor-poem-test.html";

    /**
     * ✅ 這兩個 key 要跟測驗頁一致（我們上一版用 sessionStorage）
     * 用來確保回去後「結果鍵」一定會解鎖
     */
    const INPUT_KEY   = "gb_emperor_inputs_session";
    const PENDING_KEY = "gb_emperor_pending_session";

    /**
     * ✅ 回去時帶參數 submitted=1
     * 讓測驗頁可選擇自動顯示結果/或至少解鎖按鈕
     */
    function goBack(){
      // 告訴測驗頁：「使用者已完成提交」
      sessionStorage.setItem(PENDING_KEY, "1");

      // 回測驗頁（同層導向）
      const url = `${TEST_PAGE}?submitted=1`;
      window.location.href = url;
    }

    document.getElementById("goBackBtn").addEventListener("click", goBack);

    // ✅ 可選：3 秒後自動跳回去（更順）
    // 如果你不想自動跳回去，把下面這段註解掉即可
    let sec = 3;
    const autoText = document.getElementById("autoText");
    autoText.textContent = `將於 ${sec} 秒後自動返回測驗頁…`;
    const timer = setInterval(()=>{
      sec--;
      if(sec <= 0){
        clearInterval(timer);
        goBack();
      }else{
        autoText.textContent = `將於 ${sec} 秒後自動返回測驗頁…`;
      }
    }, 1000);
  </script>
</body>
</html>
